# üéâ Felix Hub v2.2 - –ë–ê–ó–û–í–ê–Ø –í–ï–†–°–ò–Ø –ì–û–¢–û–í–ê!

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ë–î: `instance/felix_hub_v2.1_backup_20251102_195844.db`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è app.py: `app_v2.1_backup.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Flask-Login 0.6.3)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

### 2. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω `models.py` —Å –º–æ–¥–µ–ª—è–º–∏:
  - **Mechanic** - –º–æ–¥–µ–ª—å –º–µ—Ö–∞–Ω–∏–∫–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
  - **Order** - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å —Å–≤—è–∑—å—é mechanic_id
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `auth.py`:
  - Flask-Login –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã: @admin_required, @mechanic_required
  - –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 4. Backend API (–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!)
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç—ã –º–µ—Ö–∞–Ω–∏–∫–∞:
  - `/mechanic/login` - –≤—Ö–æ–¥
  - `/mechanic/logout` - –≤—ã—Ö–æ–¥
  - `/mechanic/dashboard` - –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
  - `/mechanic/orders` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
  - `/mechanic/profile` - –ø—Ä–æ—Ñ–∏–ª—å
  - `/mechanic/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- ‚úÖ API –º–µ—Ö–∞–Ω–∏–∫–∞:
  - `GET /api/mechanic/profile` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/mechanic/profile` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/mechanic/password` - —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
  - `PUT /api/mechanic/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - `GET /api/mechanic/orders` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
  - `GET /api/mechanic/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- ‚úÖ API –∞–¥–º–∏–Ω–∞ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏):
  - `GET /api/admin/mechanics` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ö–∞–Ω–∏–∫–æ–≤
  - `POST /api/admin/mechanics` - —Å–æ–∑–¥–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∞
  - `GET /api/admin/mechanics/<id>` - –¥–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∞
  - `PUT /api/admin/mechanics/<id>` - –æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∞
  - `DELETE /api/admin/mechanics/<id>` - —É–¥–∞–ª–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∞
  - `PUT /api/admin/mechanics/<id>/toggle-active` - –≤–∫–ª/–≤—ã–∫–ª

### 5. Frontend (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –º–µ—Ö–∞–Ω–∏–∫–∞ - –∫—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ Dashboard –º–µ—Ö–∞–Ω–∏–∫–∞ - —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (orders, profile, settings)

### 6. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ `migrations/migrate_v2_2.py`
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è:
  - –°–æ–∑–¥–∞–Ω 1 –º–µ—Ö–∞–Ω–∏–∫ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–∫–∞–∑–æ–≤
  - –°–≤—è–∑–∞–Ω 1 –∑–∞–∫–∞–∑ —Å –º–µ—Ö–∞–Ω–∏–∫–æ–º
  - Username: `mihail`
  - –ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `felix2025`

### 7. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ —Å–≤—è–∑–∞–Ω—ã
- ‚úÖ –ü–æ–ª–µ `mechanic_name` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –†–µ–∂–∏–º –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ .env)

---

## üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ!

```
URL: http://localhost:8000
–ü–æ—Ä—Ç: 8000
–°—Ç–∞—Ç—É—Å: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

**–í—Ö–æ–¥ –º–µ—Ö–∞–Ω–∏–∫–∞:**
```
URL: http://localhost:8000/mechanic/login
Username: mihail
Password: felix2025
```

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Å—Ç–∞—Ä–∞—è):**
```
URL: http://localhost:8000/admin
Password: felix2025
```

---

## üìã –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–¥–µ–ª–∞—Ç—å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):
1. **UI –¥–ª—è –∞–¥–º–∏–Ω–∞ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏:**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –º–µ—Ö–∞–Ω–∏–∫–æ–≤
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∫–∞
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

2. **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ—Ö–∞–Ω–∏–∫–∞:**
   - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–£–ª—É—á—à–µ–Ω–∏—è):
3. CSS —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
4. –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
7. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–∫–∞–∑–æ–≤
8. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Ö–∞–Ω–∏–∫–∞–º
9. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
felix-hub-2.1/
‚îú‚îÄ‚îÄ app.py                          ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è auth, API
‚îú‚îÄ‚îÄ models.py                       ‚úÖ –ù–æ–≤—ã–π - Mechanic, Order
‚îú‚îÄ‚îÄ auth.py                         ‚úÖ –ù–æ–≤—ã–π - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ app_v2.1_backup.py             ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ migrate_v2_2.py            ‚úÖ –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ instance/
‚îÇ   ‚îú‚îÄ‚îÄ felix_hub.db               ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ v2.2
‚îÇ   ‚îî‚îÄ‚îÄ felix_hub_v2.1_backup_*.db ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ mechanic/                  ‚úÖ –ù–æ–≤–∞—è –ø–∞–ø–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html            ‚úÖ –ì–æ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html        ‚úÖ –ì–æ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.html           ‚è≥ –ó–∞–≥–ª—É—à–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_form.html       ‚è≥ –ó–∞–≥–ª—É—à–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.html          ‚è≥ –ó–∞–≥–ª—É—à–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.html         ‚è≥ –ó–∞–≥–ª—É—à–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ admin.html                 ‚è≥ –¢—Ä–µ–±—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin_login.html           ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ index.html                 ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ mechanic.html              ‚úÖ Legacy (–¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö)
‚îú‚îÄ‚îÄ ROADMAP_v2.2.md               ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω
‚îî‚îÄ‚îÄ STATUS_v2.2.md                ‚úÖ –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∫–∞ (—á–µ—Ä–µ–∑ curl):
```bash
curl -X POST http://localhost:8000/api/admin/mechanics \
  -H "Content-Type: application/json" \
  -d '{
    "username": "david",
    "full_name": "–î–∞–≤–∏–¥",
    "password": "felix2025",
    "telegram_id": "987654321",
    "phone": "+972501234567",
    "is_active": true,
    "notify_on_ready": true,
    "language": "he"
  }'
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–µ—Ö–∞–Ω–∏–∫–æ–≤:
```bash
curl http://localhost:8000/api/admin/mechanics
```

### –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (–æ—Ç –∏–º–µ–Ω–∏ –º–µ—Ö–∞–Ω–∏–∫–∞):
```bash
curl -X PUT http://localhost:8000/api/mechanic/profile \
  -H "Content-Type: application/json" \
  -d '{
    "full_name": "–ú–∏—Ö–∞–∏–ª –í–æ—Ä–æ–±–µ–π",
    "phone": "+79001234567",
    "telegram_id": "1222334"
  }'
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è (scrypt)
- ‚úÖ Flask-Login —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ (admin/mechanic)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username/telegram_id
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `mechanics`:
```
id, username, password_hash, full_name, telegram_id, phone, email,
is_active, notify_on_ready, notify_on_processing, notify_on_cancelled,
language, created_at, updated_at, last_login
```

### –¢–∞–±–ª–∏—Ü–∞ `orders` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞):
```
id, mechanic_id [NEW], mechanic_name, telegram_id, category,
plate_number, selected_parts, is_original, photo_url, comment,
status, printed, created_at, updated_at
```

---

## üéì –û–±—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è –º–µ—Ö–∞–Ω–∏–∫–æ–≤:
1. –ü–æ–ª—É—á–∏—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –í–æ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:8000/mechanic/login
3. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–∫–∞–∑—ã –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å—ã
4. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö - —É–∫–∞–∂–∏—Ç–µ Telegram ID –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∫–æ–≤
2. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ toggle-active
3. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∫–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≤ dashboard –º–µ—Ö–∞–Ω–∏–∫–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è v2.2 –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ UI –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

---

**Felix Hub v2.2** - –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–µ—Ö–∞–Ω–∏–∫–æ–≤ ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç!
